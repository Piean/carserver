<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>卡其汽车4S店管理系统</title>
    <link href="../../../static/css/style.css" rel="stylesheet" type="text/css" media="all"/>
    <link rel="stylesheet" href="../../../static/css/admin.css">
    <link rel="stylesheet" href="../../../static/css/pintuer.css">
    <link rel="stylesheet" href="../../static/css/bootstrap.min.css">
    <!--<link href='http://fonts.googleapis.com/css?family=Fauna+One' rel='stylesheet' type='text/css'>-->

</head>
<body>
<!---start-wrap--->
<div class="wrap">
    <!---start-header--->
    <div class="header">
        <!---start-top-header--->
        <div class="top-header" style="display: none;">
            <div class="top-header-left">
                <ul>
                    <li class="active"><a href="#">Home</a></li>
                    <li><a href="#">Specials</a></li>
                    <li><a href="#">Delivery</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </div>
            <div class="top-header-right">
                <ul>
                    <li><a href="#">CURRENCY:</a></li>
                    <li>
                        <select>
                            <option>Dollar</option>
                            <option>Euro</option>
                            <option>Pound</option>
                        </select>
                    </li>
                </ul>
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
        <div class="sub-header" style="margin-top: 24px;">
            <div class="logo">
                <a href="index.html"><img src="../../static/images/logo.png" title="logo"/></a>
            </div>
            <div class="sub-header-right">
                <ul>
                    <li><a id="li_login">登录</a></li>
                    <li><a id="li_account">我的账户</a></li>
                    <li><a id="li_shopping_car">购物车 <img src="../../static/images/cart.png" title="cart"/></a></li>
                </ul>
                <!--<input type="text"><input type="submit" value="查找"/>-->
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
        <div class="top-nav">
            <ul>
                <li><a id="li_home">主页</a></li>
                <li><a id="li_news">最新资讯</a></li>
                <li><a id="li_score">积分商城</a></li>
                <li><a id="li_car_fix">车辆维护</a></li>
                <li><a id="li_question">咨询服务</a></li>
                <li><a id="li_report">问卷调查</a></li>
                <!--<li><a href="login.html">Feedback</a></li>-->
                <div class="clear"></div>
            </ul>
        </div>
        <!---end-top-header--->
        <!---End-header--->
    </div>

    <div class="modal fade" tabindex="-1" role="dialog" id="addModel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"></button>
                    <h4 class="modal-title">保修信息</h4>
                </div>
                <div class="modal-body">
                    <div class="panel admin-panel margin-top">
                        <div class="body-content">
                            <form method="post" class="form-x" action="">
                                <div class="form-group">
                                    <div class="form-group">
                                        <div class="label" style="width: 70px;">
                                            <label>车型号：</label>
                                        </div>
                                        <div class="field">
                                            <input type="text" class="form-control" id="input_car" placeholder="请填写完整的车辆型号"/>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="label" style="width: 70px;">
                                        <label>联系人：</label>
                                    </div>
                                    <div class="field">
                                        <input type="text" class="form-control" id="input_name" placeholder="请填您的姓名"/>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="label" style="width: 70px;">
                                        <label>手机号：</label>
                                    </div>
                                    <div class="field">
                                        <input type="text" class="form-control" id="input_phone" placeholder="请填写可以联系到您的手机号码"/>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="label" style="width: 70px;">
                                        <label>预约时间：</label>
                                    </div>
                                    <div class="field">
                                        <input type="date" class="form-control" id="input_date" placeholder="请选择您方便的维修时间"/>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="label" style="width: 70px;">
                                        <label>问题描述：</label>
                                    </div>
                                    <div class="field">
                                    <textarea class="form-control" style="height:120px;" id="input_matter" placeholder="请详细描述车辆故障"></textarea>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-success" id="btn-insert">预约</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <div class="content">
        <div class="contact">
            <div class="section group">
                <div class="col span_1_of_3">
                    <div class="contact_info">
                        <h3>卡其汽车4S店管理系统</h3>
                        <img src="../../static/images/11.jpg" width="100%" height="180"/>
                    </div>

                </div>
                <div class="col span_2_of_3">
                    <div class="contact-form">
                        <h3></h3>
                        <div th:each="repair : ${repairList}">
                            <h4 th:text="${repair.carType} + '&nbsp;&nbsp;&nbsp;&nbsp;' + ${repair.matter} + '&nbsp;&nbsp;&nbsp;&nbsp;' + ${#dates.format(repair.dateTime, 'yyyy-MM-dd')}"></h4>
                            <p th:text="${repair.process}"></p>
                            <hr>
                        </div>

                        <button id="btn_add_repair">预约维修</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="clear"></div>
    <div class="footer">
        <div class="section group">
            <div class="col_1_of_4 span_1_of_4">
                <h3>INFORMATION</h3>
                <ul>
                    <li><a href="#">关于我们</a></li>
                    <li><a href="#">位置信息</a></li>
                    <li><a href="#">联系方式</a></li>
                    <li><a href="#">团队精神</a></li>
                    <li><a href="#">法律责任</a></li>
                </ul>
            </div>
            <div class="col_1_of_4 span_1_of_4">
                <h3>OUR OFFERS</h3>
                <ul>
                    <li><a href="#">最新产品</a></li>
                    <li><a href="#">今日特价</a></li>
                    <li><a href="#">全部产品</a></li>
                    <li><a href="#">维护套餐</a></li>
                    <li><a href="#">维护预约</a></li>
                </ul>
            </div>
            <div class="col_1_of_4 span_1_of_4">
                <h3>YOUR ACCOUNT</h3>
                <ul>
                    <li><a href="#">我的账号</a></li>
                    <li><a href="#">会员信息</a></li>
                    <li><a href="#">积分详情</a></li>
                    <li><a href="#">收货地址</a></li>
                    <li><a href="#">我的购物车</a></li>
                </ul>
            </div>
            <div class="col_1_of_4 span_1_of_4 footer-lastgrid">
                <h3>Get in touch</h3>
                <ul>
                    <li><a href="#"><img src="../../static/images/facebook.png" title="facebook"/></a></li>
                    <li><a href="#"><img src="../../static/images/twitter.png" title="Twiiter"/></a></li>
                    <li><a href="#"><img src="../../static/images/rss.png" title="Rss"/></a></li>
                    <li><a href="#"><img src="../../static/images/gpluse.png" title="Google+"/></a></li>
                </ul>
                <p>Design by <a href="#">Maple</a></p>
            </div>
        </div>
    </div>
</div>
<!---End-wrap--->
</body>
<script src="../../static/js/jquery-3.3.1.min.js"></script>
<script src="../../static/js/bootstrap.min.js"></script>
<script src="../../static/js/common.js"></script>
<script>
    $(function () {
        getShoppingCartCount()

        $("#btn_add_repair").off().click(function () {
            $("#addModel").modal("show");
        })

        $("#btn-insert").off("click").click(function () {
            // if (checkInput()) {
                addRepair();
            // }
        })
    })

    function checkInput() {
        $(".form-control").each(function () {
            const text = $(this).val();
            if (text == null || text === "") {
                $(this).focus();
                $(this).css("border-color","red");
                alert("信息填写不完整，提交失败");
                return false;
            }
        });
    }

    function addRepair() {
        $.ajax({
            type: "post",
            dataType: "json",
            url: "repair/insert",
            data: {
                carType: $("#input_car").val(),
                phone: $("#input_phone").val(),
                name: $("#input_name").val(),
                matter: $("#input_matter").val(),
                process: "等待处理",
                dateTime: Number(new Date($("#input_date").val())),
            },
            success: function () {
                alert("添加成功")
            },
            error: function () {
                alert("系统错误")
            }
        })
    }
</script>
</html>

